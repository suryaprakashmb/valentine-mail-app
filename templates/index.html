<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Valentine Mail ğŸ’Œ</title>

    <!-- Bootstrap CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Google Font -->
    <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Poppins:wght@300;400;500&display=swap" rel="stylesheet">

<link rel="stylesheet" href="/static/style.css">
</head>

<body>

<div class="card">
    <div class="title">Send a Little Love ğŸ’Œ</div>

    <form id="mailForm">
        <div class="mb-3">
            <label class="form-label">Receiver Mail</label>
            <input type="email" class="form-control" id="receiver" placeholder="crush@gmail.com" required>
        </div>

        <div class="mb-3">
            <label class="form-label">Love Message</label>
            <textarea class="form-control" id="message" rows="4" placeholder="Type your heart here..." required></textarea>
        </div>

        <div class="d-grid">
            <button type="submit" class="btn btn-love btn-lg">Send Love ğŸ’Œ</button>
        </div>

    </form>
</div>
<script>
document.getElementById("mailForm").addEventListener("submit", async function(e) {
    e.preventDefault(); // stop page reload

    // 1ï¸âƒ£ Collect values from form
    const receiver = document.getElementById("receiver").value;
    const message = document.getElementById("message").value;

    // 2ï¸âƒ£ Create bodyData here BEFORE using it
    const bodyData = {
        receiver: receiver,
        message: message
    };

    console.log("Sending JSON:", bodyData); // ğŸ” check in console

    try {
        const response = await fetch("http://127.0.0.1:8006/send-mail", {
            method: "POST",
            headers: {"Content-Type": "application/json"},
            body: JSON.stringify(bodyData) // âœ… use the correctly defined variable
        });

        const data = await response.json();
        alert(data.message);

    } catch (err) {
        console.error(err);
        alert("Error connecting to server");
    }
});
</script>


</body>
</html>
